package curriculumdesign.cd2;

import java.io.IOException;
import java.io.PipedInputStream;
import java.io.PipedOutputStream;

class Sender extends Thread{
	private PipedOutputStream out = new PipedOutputStream();
	public PipedOutputStream getOut(){
		return out;
	}
	public void run(){
		String str = "hello pipe ! ";
		try {
			out.write(str.getBytes());
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
class Reader extends Thread{
	private PipedInputStream in = new PipedInputStream();
	private byte[] bytes = new byte[1024];
	public PipedInputStream getIn(){
		return in;
	}
	public byte[] getBytes(){
		return bytes;
	}
	public void run(){
		try {
			in.read(bytes);
			System.out.println(new String(bytes));
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
public class cd2test {

	public static void main(String[] args) {
		Sender send = new Sender();
		Reader read = new Reader();
		PipedInputStream in = read.getIn();
		PipedOutputStream out = send.getOut();
		try {
			in.connect(out);
		} catch (IOException e) {
			e.printStackTrace();
		}
		send.start();
		read.start();
	}

}
